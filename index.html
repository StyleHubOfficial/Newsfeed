<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>FocusNews ‚Äî Hi‚ÄëTech News & Wellness</title>
  <meta name="description" content="FocusNews AI ‚Äî adaptive reading, wellness tips, and powered rewriting with a hi‚Äëtech interface.">

  <!-- TailwindCSS -->
  <script src="https://cdn.tailwindcss.com" defer></script>
  <!-- Preconnect fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg1:#0b0514;
      --bg2:#0e1430;
      --accent1:#00ffd5;
      --accent2:#8a2be2;
      --glass: rgba(255,255,255,0.04);
      --muted:#9aa4b2;
    }
    html,body{height:100%;}
    body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;color:#e6f0ff;background:radial-gradient(1200px 600px at 10% 10%, rgba(138,43,226,0.12), transparent 8%), linear-gradient(180deg,var(--bg1),var(--bg2));-webkit-font-smoothing:antialiased;}

    /* floating particles background (CSS) */
    .bg-anim{position:fixed;inset:0;z-index:0;pointer-events:none;overflow:hidden}
    .bg-anim::before,.bg-anim::after{content:"";position:absolute;left:-10%;top:-10%;width:120%;height:120%;background:radial-gradient(circle at 10% 20%, rgba(0,255,213,0.06), transparent 6%), radial-gradient(circle at 90% 80%, rgba(138,43,226,0.06), transparent 6%);animation:float 18s linear infinite;filter:blur(28px)}
    .bg-anim::after{animation:float 24s linear infinite reverse;opacity:.7}
    @keyframes float{0%{transform:translateY(0) rotate(0)}50%{transform:translateY(-6%) rotate(3deg)}100%{transform:translateY(0) rotate(0)}}

    /* neon grid */
    .neon-grid{position:absolute;inset:0;background-image:linear-gradient(rgba(255,255,255,0.02) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.02) 1px, transparent 1px);background-size: 140px 140px, 140px 140px;mix-blend-mode:overlay;opacity:0.12}
    /* glass card */
    .card{background:var(--glass);border:1px solid rgba(255,255,255,0.06);backdrop-filter: blur(8px);box-shadow:0 8px 30px rgba(2,6,23,0.6);border-radius:14px}
    /* animated accent border */
    .glow-border{position:relative;overflow:hidden}
    .glow-border::after{content:"";position:absolute;inset:-2px;background:linear-gradient(90deg,var(--accent1),#7aa7ff,var(--accent2));filter:blur(18px);opacity:0.8;transform:translateX(-120%);transition:transform .9s cubic-bezier(.2,.9,.2,1)}
    .glow-border:hover::after{transform:translateX(0)}

    /* hover tilt */
    .tilt{transition:transform .28s cubic-bezier(.2,.9,.2,1)}
    .tilt:hover{transform:translateY(-8px) rotateX(3deg) rotateY(-3deg)}

    /* shimmering text */
    .shimmer-text{background:linear-gradient(90deg, rgba(255,255,255,0.06), rgba(255,255,255,0.2), rgba(255,255,255,0.06));-webkit-background-clip:text;background-clip:text;color:transparent;animation:shine 3s linear infinite}
    @keyframes shine{0%{background-position:-200% 0}100%{background-position:200% 0}}

    /* animated card reveal */
    .reveal{opacity:0;transform:translateY(12px) scale(.995);animation:revealAnim .7s forwards ease}
    .reveal.delay-1{animation-delay:.08s}.reveal.delay-2{animation-delay:.16s}.reveal.delay-3{animation-delay:.24s}
    @keyframes revealAnim{to{opacity:1;transform:translateY(0) scale(1)}}

    /* progress ring */
    .ring-wrap{width:88px;height:88px;display:inline-block}
    .progress-ring__circle{transition:stroke-dashoffset .9s ease;transform:rotate(-90deg);transform-origin:50% 50%}

    /* carousel */
    .carousel{display:flex;gap:12px;overflow:hidden}
    .carousel-track{display:flex;gap:12px;transition:transform .5s cubic-bezier(.2,.9,.2,1)}

    /* small screens */
    @media(max-width:640px){.hide-sm{display:none}}
  </style>
</head>
<body>
  <div class="bg-anim" aria-hidden="true"></div>
  <div class="neon-grid" aria-hidden="true"></div>

  <header class="relative z-20 p-4 md:px-10 md:py-6 flex items-center justify-between">
    <div class="flex items-center gap-4">
      <div class="p-2 rounded-lg card glow-border">
        <svg width="36" height="36" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 6h16M4 12h10M4 18h16" stroke="#9df7e8" stroke-width="1.6" stroke-linecap="round"/></svg>
      </div>
      <div>
        <div class="text-sm text-slate-300">FocusNews</div>
        <div class="text-xs text-slate-400 hide-sm">Hi‚ÄëTech News & Wellness ‚Ä¢ Assisted by AI</div>
      </div>
    </div>

    <div class="flex items-center gap-3">
      <div class="relative">
        <input id="search" class="bg-transparent border border-white/6 placeholder-slate-400 text-sm px-3 py-2 rounded-md w-44 md:w-64 focus:ring-2 focus:ring-cyan-400/30 outline-none" placeholder="Search topics, tags or authors" aria-label="Search">
        <button id="searchBtn" class="absolute right-1 top-1 text-xs px-2 py-1 rounded-md bg-cyan-500/10 hover:bg-cyan-500/20" aria-label="Search button">Go</button>
      </div>
      <button id="notifBtn" class="p-2 card rounded-md hover:scale-105" aria-label="Notifications"><svg width="20" height="20" viewBox="0 0 24 24"><path d="M15 17h5l-1.405-1.405A2.032 2.032 0 0 1 18 14.158V11c0-3.07-1.64-5.64-4.5-6.32V4a1.5 1.5 0 1 0-3 0v.68C7.64 5.36 6 7.92 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h11z" stroke="#bfefff" stroke-width="1.2" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg></button>
      <div class="flex items-center gap-2 card p-1 rounded-full" style="padding-left:8px;padding-right:8px">
        <div class="w-8 h-8 rounded-full bg-gradient-to-br from-cyan-300 to-purple-400 flex items-center justify-center text-black font-bold">A</div>
      </div>
    </div>
  </header>

  <main class="relative z-20 p-6 md:p-10 max-w-7xl mx-auto">
    <section class="grid grid-cols-1 lg:grid-cols-3 gap-6 items-start">
      <div class="lg:col-span-2 space-y-6">

        <article class="card p-6 glow-border tilt reveal delay-1" aria-labelledby="hero-title">
          <div class="flex items-start justify-between gap-4">
            <div>
              <h1 id="hero-title" class="text-3xl md:text-4xl font-extrabold tracking-tight"><span class="shimmer-text">FocusNews</span> ‚Äî Quantum Breakthrough</h1>
              <p class="text-sm text-slate-300 mt-2">AI-powered summarization ‚Ä¢ Adaptive reading ‚Ä¢ Wellness suggestions</p>

              <div class="mt-4 flex items-center gap-3">
                <button class="px-4 py-2 rounded-md bg-cyan-400 text-black font-semibold hover:scale-105 transition-transform" onclick="rewriteArticleTone('professional')">Rewrite</button>
                <button class="px-3 py-2 rounded-md border border-white/8 text-sm hover:bg-white/3" onclick="rewriteArticleTone('simple')">Simplify</button>
                <button class="px-3 py-2 rounded-md border border-white/8 text-sm hover:bg-white/3" onclick="rewriteArticleTone('dramatic')">Dramatic</button>
              </div>
            </div>
            <div class="text-right">
              <div id="focus-score" class="ring-wrap card p-2 rounded-lg text-center">
                <svg width="64" height="64" viewBox="0 0 120 120">
                  <defs><linearGradient id="g1" x1="0%" x2="100%"><stop offset="0%" stop-color="#00ffd5"/><stop offset="100%" stop-color="#8a2be2"/></linearGradient></defs>
                  <circle cx="60" cy="60" r="48" stroke="rgba(255,255,255,0.06)" stroke-width=8 fill="none" />
                  <circle id="progressCircle" cx="60" cy="60" r="48" stroke="url(#g1)" stroke-width=8 stroke-linecap="round" fill="none" class="progress-ring__circle" stroke-dasharray="301.44" stroke-dashoffset="301.44" />
                  <text x="60" y="66" text-anchor="middle" font-size="20" fill="#e9fbff" font-weight="700">82</text>
                </svg>
                <div class="text-xs text-slate-300 mt-1">Focus Score</div>
              </div>
            </div>
          </div>

          <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="card p-4 rounded-lg reveal delay-2">
              <div class="text-sm text-slate-300 font-semibold">AI Confidence</div>
              <div class="text-lg text-green-300 font-mono mt-2">98%</div>
            </div>
            <div class="card p-4 rounded-lg reveal delay-2">
              <div class="text-sm text-slate-300 font-semibold">Sentiment</div>
              <div class="text-lg text-yellow-300 mt-2">Positive</div>
            </div>
          </div>

          <div class="mt-6">
            <h3 class="text-sm text-slate-300 font-semibold">Original</h3>
            <p id="original-article-text" class="mt-2 text-slate-200 leading-relaxed">The new quantum computing breakthrough significantly reduces calculation time for complex molecular modeling.</p>
          </div>

          <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-3">
            <div id="rewritten-article-output" class="md:col-span-3 text-slate-300 italic text-sm card p-3 rounded-md reveal delay-3" aria-live="polite">Select a tone to adjust the summary. AI responses will show here.</div>
          </div>
        </article>

        <!-- Recommendations carousel -->
        <section class="card p-4 tilt reveal delay-2">
          <div class="flex items-center justify-between mb-3">
            <h4 class="text-lg font-semibold">Personalized Recommendations</h4>
            <div class="text-xs text-slate-400">Based on reading patterns ‚Ä¢ animated</div>
          </div>
          <div class="carousel" aria-roledescription="carousel" id="recommendation-carousel">
            <div class="carousel-track" id="recTrack">
              <div class="p-4 card rounded-lg min-w-[240px]">
                <div class="text-sm text-slate-400">Morning boost</div>
                <div class="font-semibold mt-2">Short stretch & deep breaths</div>
              </div>
              <div class="p-4 card rounded-lg min-w-[240px]">
                <div class="text-sm text-slate-400">Reading tip</div>
                <div class="font-semibold mt-2">Skim headings, then deep read</div>
              </div>
              <div class="p-4 card rounded-lg min-w-[240px]">
                <div class="text-sm text-slate-400">Focus microtask</div>
                <div class="font-semibold mt-2">25-min sprint with timer</div>
              </div>
            </div>
          </div>

          <div class="mt-3 flex gap-2">
            <button id="recPrev" class="px-3 py-1 rounded-md border border-white/6 text-sm">Prev</button>
            <button id="recNext" class="px-3 py-1 rounded-md bg-cyan-500 text-black font-semibold">Next</button>
            <button id="recRefresh" class="ml-auto px-3 py-1 rounded-md border border-white/6 text-sm" onclick="generateWellnessSuggestion()">Refresh Tips</button>
          </div>
        </section>

      </div>

      <!-- RIGHT COLUMN -->
      <aside class="space-y-6">
        <div class="card p-4 rounded-lg reveal delay-1 glow-border">
          <div class="flex items-center justify-between">
            <div>
              <div class="text-sm text-slate-300">Smart Break</div>
              <div id="pomodoro-timer" class="text-4xl font-mono mt-2">25:00</div>
            </div>
            <div>
              <button id="start-btn" class="px-3 py-2 rounded-md bg-cyan-400 text-black font-semibold">Start</button>
            </div>
          </div>
          <div class="mt-3 text-sm text-slate-400" id="break-suggestion" aria-live="polite">Suggested: Take 10 deep breaths.</div>
        </div>

        <div class="card p-4 rounded-lg reveal delay-2 glow-border">
          <div class="flex items-center justify-between">
            <div class="text-sm text-slate-300">Reading Mode</div>
            <div>
              <button id="focus-mode-toggle" class="px-2 py-1 rounded-md border border-white/8 text-sm">Toggle</button>
            </div>
          </div>
          <div class="mt-3 text-sm text-slate-400">Dyslexia font ‚Ä¢ High contrast ‚Ä¢ Adjustable size</div>
        </div>

        <div class="card p-4 rounded-lg reveal delay-3">
          <div class="text-sm text-slate-300 font-semibold">Your Achievements</div>
          <div class="mt-3 flex gap-2">
            <div class="p-3 rounded-md bg-gradient-to-br from-cyan-300 to-purple-400 text-black font-bold">üèÜ</div>
            <div>
              <div class="text-sm">Streak</div>
              <div class="font-semibold">7 days</div>
            </div>
          </div>
        </div>

      </aside>
    </section>
  </main>

  <footer class="z-20 relative p-6 text-center text-xs text-slate-400">Built with care ‚Äî FocusNews ‚Ä¢ Local-first privacy</footer>

  <!-- client script -->
  <script>
    // lazy init lucide icons
    (function lazyIcons(){
      const idle = window.requestIdleCallback || (fn=>setTimeout(fn,500));
      idle(()=>{const s=document.createElement('script');s.src='https://unpkg.com/lucide@latest';s.defer=true;s.onload=()=>{if(window.lucide) lucide.replace()};document.head.appendChild(s)});
    })();

    // progress ring helper
    function setProgress(percent){
      const circle = document.getElementById('progressCircle');
      const radius = 48; const circumference = 2*Math.PI*radius;
      circle.style.strokeDasharray = circumference;
      const offset = circumference - (percent/100)*circumference;
      circle.style.strokeDashoffset = offset;
    }
    // animate to 82 by default
    document.addEventListener('DOMContentLoaded', ()=> setTimeout(()=> setProgress(82), 500));

    // recommendation carousel controls
    const recTrack = document.getElementById('recTrack'); let recIndex=0; const recLen = recTrack?.children?.length||0;
    function updateRec(){
      const w = recTrack.children[0].getBoundingClientRect().width + 12;
      recTrack.style.transform = `translateX(${-(recIndex*w)}px)`;
    }
    document.getElementById('recNext')?.addEventListener('click', ()=>{recIndex = (recIndex+1)%recLen; updateRec()});
    document.getElementById('recPrev')?.addEventListener('click', ()=>{recIndex = (recIndex-1+recLen)%recLen; updateRec()});
    window.addEventListener('resize', ()=> setTimeout(updateRec,120));

    // adaptive reading prefs (keyboard accessible)
    const focusModeToggle = document.getElementById('focus-mode-toggle');
    focusModeToggle?.addEventListener('click', ()=>{document.querySelector('aside')?.classList.toggle('hidden');document.querySelector('header')?.classList.toggle('opacity-30')});

    // Pomodoro minimal
    let pomodoroDuration = 25*60; let timer=null; let remaining=pomodoroDuration; const timerEl=document.getElementById('pomodoro-timer');
    function formatMMSS(s){return `${Math.floor(s/60).toString().padStart(2,'0')}:${(s%60).toString().padStart(2,'0')}`}
    function startPomodoro(){ if(timer) return; const startBtn=document.getElementById('start-btn'); startBtn.textContent='Pause'; timer=setInterval(()=>{remaining--; if(timerEl) timerEl.textContent=formatMMSS(remaining); if(remaining<=0){clearInterval(timer);timer=null;remaining=pomodoroDuration;startBtn.textContent='Start';flashConfetti()}} ,1000); startBtn.onclick=pausePomodoro }
    function pausePomodoro(){ if(timer) clearInterval(timer); timer=null; const startBtn=document.getElementById('start-btn'); startBtn.textContent='Start'; startBtn.onclick=startPomodoro }
    document.getElementById('start-btn')?.addEventListener('click', startPomodoro);
    function flashConfetti(){ const el=document.createElement('div'); el.style.position='fixed'; el.style.inset=0; el.style.zIndex=60; el.style.pointerEvents='none'; el.style.background='radial-gradient(circle at 20% 30%, rgba(0,255,200,0.06), transparent 10%), radial-gradient(circle at 80% 70%, rgba(138,43,226,0.06), transparent 12%)'; document.body.appendChild(el); setTimeout(()=>el.remove(),800) }

    // LLM integration (server-backed)
    async function rewriteArticleTone(tone){ const original=document.getElementById('original-article-text')?.textContent||''; const out=document.getElementById('rewritten-article-output'); if(!out) return; out.textContent='Generating...'; out.classList.add('shimmer'); try{ const r=await fetch('/api/rewrite',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({text:original,tone})}); if(!r.ok){ out.textContent='Error generating rewrite'; return } const data=await r.json(); out.textContent=data.rewritten||data.output||'No output'; out.animate([{opacity:0},{opacity:1}],{duration:360,fill:'forwards'}) }catch(e){console.error(e); out.textContent='Network error'} finally{out.classList.remove('shimmer')} }

    async function generateWellnessSuggestion(){ const el=document.getElementById('break-suggestion'); if(!el) return; el.textContent='Thinking...'; el.classList.add('shimmer'); try{ const r=await fetch('/api/suggestion',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({context:'reader is slightly fatigued'})}); if(!r.ok){el.textContent='Unable to fetch'; return} const d=await r.json(); el.textContent=d.suggestion||d.output||'Take a short break'; el.animate([{transform:'scale(.98)'},{transform:'scale(1.02)'},{transform:'scale(1)'}],{duration:420}) }catch(err){console.error(err); el.textContent='Network error'} finally{el.classList.remove('shimmer')} }

    // mode banner (show if not openai)
    async function fetchModeAndNotify(){ try{ const r=await fetch('/api/mode'); if(!r.ok) return; const j=await r.json(); if(j.mode && j.mode!=='openai'){ const b=document.createElement('div'); b.setAttribute('role','status'); b.className='fixed left-1/2 -translate-x-1/2 top-4 z-60 bg-yellow-600/10 border border-yellow-400 text-yellow-200 px-4 py-2 rounded-md text-sm'; b.style.backdropFilter='blur(6px)'; b.textContent = j.mode==='simulate' ? 'Demo Mode: using simulated responses. Set OPENAI_API_KEY or LOCAL_MODEL_URL to enable live LLM.' : `Local Model Mode: forwarding to ${j.info||'local model'}`; document.body.appendChild(b); setTimeout(()=>b.remove(),8000) } }catch(e){console.warn('mode check failed',e)} }
    window.addEventListener('load', fetchModeAndNotify);

    // accessibility: keyboard nav for cards (simple)
    document.addEventListener('keydown', (e)=>{ if(e.key==='/' && document.activeElement?.tagName!=='INPUT'){ e.preventDefault(); document.getElementById('search')?.focus(); } });
  </script>
</body>
</html>